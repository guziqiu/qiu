

# 目录



[TOC]

2020.11.18-2020.12.20





# 一、基础知识

## 1.`vim`的基本使用

> `pwd`		(print working directory)
>
> `$0whoamiaptapt `
>
> `updateapt` 
>
> `upgrade`
> `apt-cache search XXX`		(搜索XXX软件)
> `apt remove XXX`		(卸载XXX软件)
> `dpkg -i xxx.dep`		(使用dpkg程序安装xxx.dep)(安装 = install -> -i)
> `dpkg -r` 		(使用dpkg卸载软件)(卸载 = remove -> -r)







## 2.`Terminal`

终端`( terminal )= tty `(Teletypewriter， 电传打印机)，作用是提供一个命令的输入输出环 境，在`linux`操作系统下使用组合键 `ctrl + alt + T` 打开的就是终端，可以认为 `terminal` 和 `tty `是 同义词。



## 3.`shell`

`shell`是一种人机交互的接口。 `shell` 有壳的意思，是指 “提供使用者使用界面” 的软件，是一种 命令解析器,是`Linux`内核的一个壳，负责外界与Linux内核的交互。



> `windows` 的cmd就是一种`shell`。所以 `shell` 并不只是指命令语言`-Bash/Zsh`。 其实GUI本身也是一种`shell`.



用户在 `shell` 中提交命令， `shell` 负责接收用户的命令，并扮演命令解析器的⻆色。 

当你打开一个 `Terminal` 时，操作系统会将 Terminal 和 Shell 关联起来，当我们在 `Terminal` 中输入命令的时候， `Shell` 就负责解释命令。











## 3、命令

> 命令是人和计算机交互的基本单位，人使用命令 将要做什么事传达给计算机，计算机做出解 析，并做出回应。



**命令也有自己的语法结构**:

和人说话一样，命令的主要结构也可以看做为主谓宾的简单句和复杂句，在命令中，省略主语





> 举个例子

`cp(谓语动词) fileA(宾语) fileB(宾语)`

 `cp(谓语动词) -ar(方式状语) fileA(宾语) fileB(宾语)`

**命令细节**

> Linux命令由以下几个部分组成: 命令名 ， 分隔符 ， 选项 和 操作对象 组成。 

**命令名**

命令名标识了命令的功能，如cp，rm，mv，rename，fdisk等等，都能很轻易的看出该命令的功能， 还有一些命令，有二级子命令，如apt-get install | remove，install和remove就是apt-get的子命令。

**分隔符**

  分隔符通常为空格，连续的多个空格会被视为一个空格。

> 一些特殊的符号也属于分隔符，例如管道`|`，重定向`>,<<,<,>>,`后台运行`&`，序列执行``&&```、;``都 是特殊的分隔符，在使用这些特殊符号的时候，不需要额外加空格，但为了使命令更易读，通常会 加上空格。

**选项**

- 命令的选项通常用 `-` 连接，通常为一个字母，是选项的首字母。大多数命令都可以使用 `-h` 来 查看该命令的帮助。
- 命令的选项也可以使用 `--` 来引导，接的是选项的全程，效果与—连接单个字母是一样的。

**操作对象**

   操作对象为该命令动作的承受着。

**格式约定**

- 使用 `[]` 来标记可以选择的选项
-  使用 `|` 来表示不能同时使用的参数 
- 选项通常紧跟命令名，当然，在很多时候我们可以省略命令的选项而使用默认参数

## **4.程序与进程**

> 那么什么是程序呢?
>
> >  计算机程序是指一组指示计算机执行动作或做出判断的指令，通常用某种程序设计语言
> > 编写，运行于某种目标体系结构上。



> 什么又是进程呢?
>
> > 进程是程序在内存中的镜像。



## 5.路径

**绝对路径**

​	绝对路径的起始点为根目录 `/` ,例如 `/usr/bin/cp` 就是一个绝对路径。

**相对路径** 

​	相对路径的起始点为当前路径 `.` ，假如用户当前目录为 `/home/apricity/` ，那么同样的文件 `cp` ,其 相对路径为 `../../usr/bin/cp` 。



**远程路径**

> 在很多时候，我们会需要访问本机之外的资源，这个时候远程路径就有了用武之地了。

远程路径的一般表示方法为: `协议://用户名:密码@位置/路径:端口` 比如: http://baidu.com

​    `ftp://user:passwd@ftp.baidu.com:21`
  远程路径根据应用的不同，具体表示方法和所需要的参数都不太一致，从以上两个远程路径就可以
看出。

**路径相关的命令**

> `cd` #change directory

> `ls` #list
>  `pwd` #print working directory

**特殊路径**

> `~` 家目录
>  `-` 上次工作目录





## **6.软件**

通常，一个软件包含的内容会分别被拷⻉到同级别的 `bin lib share` 和 `/etc` 目录下。

> `bin` 存放程序的可执行文件。在系统环境变量中将该路径添加进去，就可以直接执行程序. 
>
> `lib` 库文件集中存放，方便共享。
>  `share` 存放程序需要的其他资源.
>  `/etc` 配置文件存放路径，大部分的程序的配置文件都可以在这个路径下找到







## 7.**配置方式**

> `/etc/network/interface` 文件为Ubuntu的网络配置文件，通过修改该文件，并重启网络， 就可以实现网络的配置工作。





直接使用ifconfig命令来直接修改网络配置:

`ifconfig eth0 172.17.211.175`

这条命令将把设备` eth0` 的`ip`地址更新为 `172.17.211.175` 。

## 8.隐藏文件

Linux的隐藏文件都是以` .` 开头的，也就是说所有以 `.` 开头的文件都会被系统识别为隐藏文件。

使用` ls` 命令添加 `a` 选项，就可以显示隐藏文件。 这里有两个特殊的目录 `.` 和` ..` ,分别为当前目录和父目录。

## 9.文件类型

使用 `ll` 命令可以查看当前文件夹下所有文件的详细信息。

> `ll` 等效于 `ls -al`

```bash
apricity@qiu ~ % ll                                                                                                                                                           [0]
total 40K
-rw-rw-r-- 1 apricity apricity    0 Nov 22 16:39 aaa.txt
drwxrwxr-x 7 apricity apricity 4.0K Nov 20 19:08 autojump
drwxrwxr-x 2 apricity apricity 4.0K Nov 25 11:34 C语言
drwxrwxr-x 3 apricity apricity 4.0K Nov 19 14:42 guziqiu
drwxrwxr-x 2 apricity apricity 4.0K Nov 20 19:33 haizei_oj
-rw-rw-r-- 1 apricity apricity 8.3K May 25  2020 install_zsh.sh
drwxrwxr-x 4 apricity apricity 4.0K Nov 22 14:10 linux基础
drwxrwxr-x 2 apricity apricity 4.0K Nov 22 20:46 test
-rw-rw-r-- 1 apricity apricity    0 Nov 12 01:14 update
drwxrwxr-x 7 apricity apricity 4.0K Nov 12 00:49 zsh-syntax-highlighting
```

​		**该命令主要输出了七列内容，分别为:权限、文件数、所属用户、所属群组、文件大小、常⻅日**
**期、文件名。**
 		 **第一列权限，主要可以分为以下四个部分:文件类型，所属用户权限，所属组权限，其他用户权**
**限**。



> 以刚才执行`ll`的结果中的 `../` 目录的权限为例:
>
> | 文件类型 | 所属用户权限 | 所属群组权限 | 其他用户权限 |
> | :------: | :----------: | :----------: | :----------: |
> |    d     |     rwx      |     r-x      |     r-x      |

- 第一部分文件类型为 d ,代表这个文件是一个目录(directory)，目录是一种特殊的文件; 
- 第二部分所属用户权限为 rwx ，代表该文件拥有者拥有可读(read),可写(write),可执行(execute) 的权限;

- 第三部分所属群组权限为 r-x ，代表与该文件拥有者在一个群组的用户具有可读，可执行的权 限，在这里` -` 顶替了` w `的位置，代表没有写权限; 
- 第四部分其他用户权限同样为可读，可执行。

> `rwx` 的顺序是固定的!



Linux中的文件类型除了目录 d 之外，总共有7种文件类型，

- `-` regular file 普通文件
- `d` directory目录 
- `l` link链接
- `b`  block 块设备 存储数据以供系统存取的接口设备，也就是硬盘
- `c`   character 字符设备 串口设备，键盘，鼠标等
- `s` socket套接字`//应用层和底层的接口`
- `p` pipe管道



对于普通文件又可以分为以下三种:

-   纯文本文件

  ​		纯文本文件使用`ASCII`编码，这是`Linux`系统中最常⻅的一种文件类型，之所以成为纯文本文件，是因 为这种类型的文件是我们可以直接读取的内容，在`Linux`，几乎所有的配置文件都属于这种类型。

- 二进制文件 

  ​		二进制文件是系统中的可执行文件(不包括脚本)，计算机只能认识并执行二进制文件。二进制文件不能使用 `cat` 等命令直接读出。 

- 数据格式的文件

  在一些程序运行过程中，需要读取特定格式的文件，这种文件被称为数据文件(data file)。这种文件 通常也不能使用`cat`命令读出。 例如: `/var/log/wtmp` 文件。

>使用`ll`命令查看文件，可以看到该文件为普通文件   `ll` == `ls -l`
>
>```bash
>	ll /var/log/wtmp
>
>  -rw-rw-r-- 1 root utmp 8832 Apr 27 11:50 /var/log/wtmp
>```
>
>使用file命令查看问价详情，返回为 `data`
>
>```bash
>file /var/log/wtmp
>/var/log/wtmp: data
>```
>
>

## 10.文件权限

​		

> 文件的权限包含三组( `u` 用户，` g` 群组，` o` 其他用户)，每一组又都包含 三组具体的权限(` r `读，` w `写，` x `执行)。	

​			对于文件权限，我们也可以用下面的方式来表示:

|    r    |    w    |    x    |    r    |    w    |    x    |    r    |    w    |    x    |
| :-----: | :-----: | :-----: | :-----: | :-----: | :-----: | :-----: | :-----: | :-----: |
| (2^2) 4 | (2^1) 2 | (2^0) 1 | (2^2) 4 | (2^1) 2 | (2^0) 1 | (2^2) 4 | (2^1) 2 | (2^0) 1 |

也就是权限的每一组都由三个十进制的数字表示，该组的的权限就可以简单的用着三个十进制的数

字相加得到。

> 一个权限为` rwxr-xr-x` 的文件，则它的权限可以使用 `755` 来表示。







## 11.**与文件权限有关的命令**





```bash
chmod #更改文件权限 
chown #更改文件所属用户 
chgrp #更改文件所属组
```



- chmod 的用法

```bash
chmod a+x file #给file文件的ugo都赋予执行的权限
chmod o-x file #将file文件o减去执行权限
chmod 755 file #设置file文件的权限为rwxr-xr-x
chmod u=rwx,go=rx file #设置file文件的权限为rwxr-xr-x
```



- chown 的用法

```bash
chown guziqiu:apricity file #修改file的所属用户是guziqiu,所属组为apricity
 chown -R guziqiu:apricity directory 
 #修改目录directory及目录下的所有文件的所属用户是guziqiu， 所属组为zpricity
 chown guziqiu file #修改file的所属用户为guziqiu
```



- chgrp 的用法

```bash
chgrp root file #修改file所属的组为root
```



## 12.用户

> `Linux`有两类用户,分别是 `root` 和 `普通用户` 。

- 超级管理员: `root`

  `root` 拥有系统的完全控制权，所以在使用`Linux`系统的时候，需要慎重使用`root`用户，更多的自由 与权限同样也意味着更大的⻛险。

- 普通用户

  普通用户拥有的权限就没有 `root` 用户那么大了，它只能做系统允许做的事。普通用户可以执行大 部分的命令，但是`root`专有的命令却不能执行。



可以使用 su 命令来切换用户:

```bash
:~$ whoami
guziqiu
:~$ su - root
Password:
:~# whoami
root
:~# su - guziqiu
:~$ whoami
guziqiu
```

> `su - guziqiu`
>
> `-`代表一次完整的重新登录



退出

`control +D`

`exit `

`logout`



## 13.其他命令



`id`

```bash
apricity@qiu ~ % id                                                                                                                                                 [0]
uid=1000(apricity) gid=1000(apricity) groups=1000(apricity),27(sudo)
//用户，组，其他组
```





1.火车动画

​	`sl`

2.`apt-build moo` 

```bash
apt-build moo 

         (__)    ~
         (oo)   /
     _____\/___/
    /  /\ / /
   ~  /  * /
     / ___/
*----/\
    /  \
   /   /
  ~    ~
..."Have you danced today? Discow!"...
```



3.cowsay

用ASCII字符打印牛，羊等动物，还有个cowthink，这个是奶牛想，那个是奶牛说，哈哈，差不多

`sudo apt-get install cowsay`

`cowsay -f tux "坑爹啊"`

```shell
________
< 坑爹啊 >
 --------
   \
    \
        .--.
       |o_o |
       |:_/ |
      //   \ \
     (|     | )
    /'\_   _/`\
    \___)=(___/
```



4. `cmatrix` 命令

这个很酷！《黑客帝国》那种矩阵风格的动画效果

 `sudo apt-get install cmatrix`

`cmatrix`

`q`退出



# 二、命令系统

shell、termial、console

>shell是一种命令解析器，它给用户提供了一个输入命令并接受机器返回结果的界面。

console控制台，一般console只能有一个

terminal,它是一个封装程序，一个terminal运行一个shell来扩充为一个具备shell功能的的程序。

> console 和 terminal的概念都源自大型机，console可以看作为一个特殊的terminal。现在用的一般都是引申义，一般情况下可以混用。



命令返回值含义

[0]如果为 0，则表示命令执行成功，其它值则表示错误，

[1]Operation not permitted

[2]No such file or directory

```shell
"OS error code   1:  Operation not permitted"
 "OS error code   2:  No such file or directory"
 "OS error code   3:  No such process"
 "OS error code   4:  Interrupted system call"
 "OS error code   5:  Input/output error"
 "OS error code   6:  No such device or address"
 "OS error code   7:  Argument list too long"
 "OS error code   8:  Exec format error"
 "OS error code   9:  Bad file descriptor"
 "OS error code  10:  No child processes"
 "OS error code  11:  Resource temporarily unavailable"
 "OS error code  12:  Cannot allocate memory"
 "OS error code  13:  Permission denied"
 "OS error code  14:  Bad address"
 "OS error code  15:  Block device required"
 "OS error code  16:  Device or resource busy"
 "OS error code  17:  File exists"
 "OS error code  18:  Invalid cross-device link"
 "OS error code  19:  No such device"
 "OS error code  20:  Not a directory"
 "OS error code  21:  Is a directory"
 "OS error code  22:  Invalid argument"
 "OS error code  23:  Too many open files in system"
 "OS error code  24:  Too many open files"
 "OS error code  25:  Inappropriate ioctl for device"
 "OS error code  26:  Text file busy"
 "OS error code  27:  File too large"
 "OS error code  28:  No space left on device"
 "OS error code  29:  Illegal seek"
 "OS error code  30:  Read-only file system"
 "OS error code  31:  Too many links"
 "OS error code  32:  Broken pipe"
 "OS error code  33:  Numerical argument out of domain"
 "OS error code  34:  Numerical result out of range"
 "OS error code  35:  Resource deadlock avoided"
 "OS error code  36:  File name too long"
 "OS error code  37:  No locks available"
 "OS error code  38:  Function not implemented"
 "OS error code  39:  Directory not empty"
 "OS error code  40:  Too many levels of symbolic links"
 "OS error code  42:  No message of desired type"
 "OS error code  43:  Identifier removed"
 "OS error code  44:  Channel number out of range"
 "OS error code  45:  Level 2 not synchronized"
 "OS error code  46:  Level 3 halted"
 "OS error code  47:  Level 3 reset"
 "OS error code  48:  Link number out of range"
 "OS error code  49:  Protocol driver not attached"
 "OS error code  50:  No CSI structure available"
 "OS error code  51:  Level 2 halted"
 "OS error code  52:  Invalid exchange"
 "OS error code  53:  Invalid request descriptor"
 "OS error code  54:  Exchange full"
 "OS error code  55:  No anode"
 "OS error code  56:  Invalid request code"
 "OS error code  57:  Invalid slot"
 "OS error code  59:  Bad font file format"
 "OS error code  60:  Device not a stream"
 "OS error code  61:  No data available"
 "OS error code  62:  Timer expired"
 "OS error code  63:  Out of streams resources"
 "OS error code  64:  Machine is not on the network"
 "OS error code  65:  Package not installed"
 "OS error code  66:  Object is remote"
 "OS error code  67:  Link has been severed"
 "OS error code  68:  Advertise error"
 "OS error code  69:  Srmount error"
 "OS error code  70:  Communication error on send"
 "OS error code  71:  Protocol error"
 "OS error code  72:  Multihop attempted"
 "OS error code  73:  RFS specific error"
 "OS error code  74:  Bad message"
 "OS error code  75:  Value too large for defined data type"
 "OS error code  76:  Name not unique on network"
 "OS error code  77:  File descriptor in bad state"
 "OS error code  78:  Remote address changed"
 "OS error code  79:  Can not access a needed shared library"
 "OS error code  80:  Accessing a corrupted shared library"
 "OS error code  81:  .lib section in a.out corrupted"
 "OS error code  82:  Attempting to link in too many shared libraries"
 "OS error code  83:  Cannot exec a shared library directly"
 "OS error code  84:  Invalid or incomplete multibyte or wide character"
 "OS error code  85:  Interrupted system call should be restarted"
 "OS error code  86:  Streams pipe error"
 "OS error code  87:  Too many users"
 "OS error code  88:  Socket operation on non-socket"
 "OS error code  89:  Destination address required"
 "OS error code  90:  Message too long"
 "OS error code  91:  Protocol wrong type for socket"
 "OS error code  92:  Protocol not available"
 "OS error code  93:  Protocol not supported"
 "OS error code  94:  Socket type not supported"
 "OS error code  95:  Operation not supported"
 "OS error code  96:  Protocol family not supported"
 "OS error code  97:  Address family not supported by protocol"
 "OS error code  98:  Address already in use"
 "OS error code  99:  Cannot assign requested address"
 "OS error code 100:  Network is down"
 "OS error code 101:  Network is unreachable"
 "OS error code 102:  Network dropped connection on reset"
 "OS error code 103:  Software caused connection abort"
 "OS error code 104:  Connection reset by peer"
 "OS error code 105:  No buffer space available"
 "OS error code 106:  Transport endpoint is already connected"
 "OS error code 107:  Transport endpoint is not connected"
 "OS error code 108:  Cannot send after transport endpoint shutdown"
 "OS error code 109:  Too many references: cannot splice"
 "OS error code 110:  Connection timed out"
 "OS error code 111:  Connection refused"
 "OS error code 112:  Host is down"
 "OS error code 113:  No route to host"
 "OS error code 114:  Operation already in progress"
 "OS error code 115:  Operation now in progress"
 "OS error code 116:  Stale NFS file handle"
 "OS error code 117:  Structure needs cleaning"
 "OS error code 118:  Not a XENIX named type file"
 "OS error code 119:  No XENIX semaphores available"
 "OS error code 120:  Is a named type file"
 "OS error code 121:  Remote I/O error"
 "OS error code 122:  Disk quota exceeded"
 "OS error code 123:  No medium found"
 "OS error code 124:  Wrong medium type"
 "OS error code 125:  Operation canceled"
 "OS error code 126:  Required key not available"
 "OS error code 127:  Key has expired"
 "OS error code 128:  Key has been revoked"
 "OS error code 129:  Key was rejected by service"
 "OS error code 130:  Owner died"
 "OS error code 131:  State not recoverable"
```



## 1.Linux帮助系统

`man`手册

`man ls`

`ls(1)ls`第一部分

`user commands` 所属部分：用户命令

`info`手册

`ls --time =atime -l` 

`man scanf`

`linux porgrammer's manual`：所属部分:系统开发者



> 在学习使用Linux的时候，我们会遇到很多以前没有用过的命令和功能，这个时候最好的解决办法就是求助于**man**.

`man`的使用方法很简单，例如查看`ls`的帮助手册，可以直接使用命令`man ls`即可查看`ls`的命令帮助。

```sh
LS(1)                                       User Commands                                LS(1)



NAME  #命令全名，简单的说明及用法
       ls - list directory contents

SYNOPSIS #基本语法
       ls [OPTION]... [FILE]...

DESCRIPTION #详细说明语法中参数的用法
       List information about the FILEs (the current directory by default).  Sort entries alphabeti‐
       cally if none of -cftuvSUX nor --sort is specified.

       Mandatory arguments to long options are mandatory for short options too.

       -a, --all
              do not ignore entries starting with .

       -A, --almost-all
              do not list implied . and ..

       --author
              with -l, print the author of each file
 #中间省略
       -1     list one file per line

       --help display this help and exit

       --version
              output version information and exit

       SIZE  may be (or may be an integer optionally followed by) one of following: KB 1000, K 1024,
       MB 1000*1000, M 1024*1024, and so on for G, T, P, E, Z, Y.

       Using color to distinguish file types is disabled both by  default  and  with  --color=never.
       With --color=auto, ls emits color codes only when standard output is connected to a terminal.
       The LS_COLORS environment variable can change the settings.  Use the dircolors command to set
       it.

   Exit status: #错误返回值
       0      if OK,

       1      if minor problems (e.g., cannot access subdirectory),

       2      if serious trouble (e.g., cannot access command-line argument).

AUTHOR  #作者
       Written by Richard M. Stallman and David MacKenzie.

REPORTING BUGS #bug提交联系方式
       Report ls bugs to bug-coreutils@gnu.org
       GNU coreutils home page: <http://www.gnu.org/software/coreutils/>
       General help using GNU software: <http://www.gnu.org/gethelp/>
       Report ls translation bugs to <http://translationproject.org/team/>

COPYRIGHT  #版权保护
       Copyright  ©  2011 Free Software Foundation, Inc.  License GPLv3+: GNU GPL version 3 or later
       <http://gnu.org/licenses/gpl.html>.
       This is free software: you are free to change and redistribute it.  There is NO WARRANTY,  to
       the extent permitted by law.

SEE ALSO ##在哪里可以看到更多关于该命令的文档
       The full documentation for ls is maintained as a Texinfo manual.  If the info and ls programs
       are properly installed at your site, the command

              info coreutils 'ls invocation'

       should give you access to the complete manual.



GNU coreutils 8.12.197-032bb               September 2011                                      LS(1)
```

> 眼尖的同学应该注意到了手册中开头和结尾的地方写的`LS(1)`了，那么这是什么意思呢？它代表的是一般用户可使用的命令。

在man中，常见的几个数字的含义如下表所示：

| 代号 | 代表的含义                                  | 举例               |
| :--: | :------------------------------------------ | ------------------ |
|  1   | 用户在shell环境下可以操作的命令或可执行文件 | `man 1 ls`         |
|  2   | 系统内核可调用的函数和工具                  | `man 2 reboot`     |
|  3   | 一些常用的函数与函数库，大部分C的函数库     | `man 3 readdir`    |
|  4   | 设备文件的说明，通常是在`/dev`下的设备      | `man 4 null`       |
|  5   | 配置文件或某些文件的格式                    | `man 5 interfaces` |
|  6   | 游戏                                        | `man 6 lol` 😂      |
|  7   | 惯例与协议等，例如Linux文件系统，网络协议等 | `man 7 tcp`        |
|  8   | 系统管理员可用的命令                        | `man 8 reboot`     |
|  9   | 跟kernel有关的文件                          |                    |
|  o   | 旧文档                                      |                    |
|  n   | 新文档                                      |                    |
|  l   | 本地文档                                    |                    |



在man手册中，我们可以用到的快捷键如下：

| 快捷键          | 功能       | 快捷键      | 功能       |
| --------------- | ---------- | ----------- | ---------- |
| Ctrl+f(orward)  | 向下翻一页 | Ctrl+d(own) | 向下翻半页 |
| Ctrl+b(ackward) | 向上翻一页 | Ctrl+u(p)   | 向上翻半页 |
| /               | 查找       | q(uit)      | 退出       |



随堂练习：

```shell
man -f            #whatis
man -k            #apropos
```

> 在Linux中还有一种在线求助的方式`info`,有兴趣的可以了解一下。







## 2.linux常用命令

1.文件及目录相关，文件内容的修改与查看

|                       |                                     |
| --------------------- | ----------------------------------- |
| `ls`查看目录下内容    | `cd`目录跳转                        |
| `pwd`打印工作目录     | `cp`拷贝                            |
| `mv`移动文件及目录    | `rm`删除文件及目录                  |
| `mkdir`创建目录       | `tree`打印目录树                    |
| `tar`文件归档与压缩   | `ln`创建链接文件                    |
| `touch`创建空白文件   | `head`查看文件头部                  |
| `cat`查看文件内容     | tail查看文件尾部                    |
| `vim`文本编辑器       | `diff`对比文件                      |
| `echo`打印文本        | `grep`检索信息                      |
| `more`分页查看文件    | `wc`计数                            |
| `less`分页查看文件    | `find`查找文件                      |
| `which`查找可执行文件 | `whereis`查找可执行、源码、帮助手册 |
| `locate`定位任何文件  |                                     |



2.用户相关命令，进程相关命令

|                       |                          |
| --------------------- | ------------------------ |
| `useradd`新建用户     | `chgrp`修改所属组        |
| `userdel`删除用户     | `chmod`修改文件权限      |
| `usermod`修改用户     | `chown`修改文件所属用户  |
| `passwd`修改密码      | `logout`退出用户         |
| `su`切换用户          | `exit`退出用户           |
| `sudo`获取管理员权限  |                          |
| `ps`打印进程          | `ctrl+z`挂起前台任务     |
| `kill`杀死进程        | `fg`将进程调至前台运行   |
| `pkill`批量杀死进程   | `bg`让挂起的进程后台执行 |
| `killall`批量杀死进程 | `jobs`查看挂起和后台进程 |
| `crotab`定时任务      |                          |

3.系统信息命令获取

| `date` 查看时间      | `dstat`查看系统信息  |
| -------------------- | -------------------- |
| `df`查看文件系统     | `nmon`查看系统信息   |
| `du`获取目录文件大小 | `ifconfig`查看IP信息 |
| `free`查看内存       | `uname`查看OS信息    |
| `top`查看系统信息    | `last`查看最近登录   |
| `htop`查看系统信息   | `who`查看当前登录    |



4.其他命令

|                      |                |
| -------------------- | -------------- |
| `ssh`远程连接        | `poweroff`关机 |
| `scp`远程拷贝        | `reboot`重启   |
| `wget`获取`http`文件 |                |
| `ping`测试远程主机   |                |









# 三、zsh

### 1.通配符

* ？

  代表**单个任意字符**

* *

  代表**任意几个任意字符**

> 请看下面的例子，并自己动手尝试一下通配符的使用

```bash
suyelu@HaiZei-Tech:~$ ls
a.log  code  HaiZei  helloworld  你好world
suyelu@HaiZei-Tech:~$ ls *ld
helloworld  你好world
suyelu@HaiZei-Tech:~$ ls ??world
你好world
suyelu@HaiZei-Tech:~$ ls ?????world
helloworld
suyelu@HaiZei-Tech:~$
```

除了*****和**?**这两个通配符之外，Linux中还有下面几种通配符

| 通配符                | 含义                                      | 举例                                                         |
| --------------------- | ----------------------------------------- | ------------------------------------------------------------ |
| [list]                | 匹配list中的任意单一字符                  | a[xyz]b  a与b之间有且只有一个字符, 且只能是x或y或z, 如: axb, ayb, azb。 |
| [!list]               | 匹配除list中的任意单一字符                | a[!0-9]b  a与b之间有且只有一个字符, 但不能是数字, 如axb, aab, a-b等 |
| [c1-c2]               | 匹配c1-c2中的任意单一字符                 | a[0-9]b  a与b之间有且只有一个字符，该字符是0-9之间的数字，如a0b, a1b，... ，a9b。 |
| {string1,string2,...} | 匹配 sring1 或 string2 (或更多)其一字符串 | a{abc,xyz,123}b    a与b之间只能是abc或xyz或123这三个字符串之一。 |





### 2.任务管理





`PATH=${PATH}:.`

locate

1.`&`

在命令的后面加上**`&`**表示后台执行的意思

```shell
command &
```



2.`;`

在命令之间以**`;`**相连，表示顺序执行的意思

```shell
command1;command2
```

3.**`&&`**

命令之间以**`&&`**相连时，只有第一个命令成功执行，第二个命令才会执行

```shell
command1 && command2
```



4.**`||`**

命令之间以**`||`**相连时，如果前一个命令执行失败，则执行第二个命令

```shell
command1 || command2
```

5.**` `` `**

命令中如果包含另一个命令，则用符号**``** 将它包括起来，在执行的时候系统将优先执行**``**中的子命令，然后将其结果代入父命令继续执行

```shell
command1 `command2`
```

6.**`ctrl + z`**

在shell中执行命令时，同时按下**`ctrl + z`**可以将暂时挂起


```shell
suyelu@HaiZei-Tech:~$ vim helloworld.c

[1]+  Stopped                 vim helloworld.c
suyelu@HaiZei-Tech:~$
```

 >什么是挂起？


7. **`bg`**

   执行**`bg`**命令，可以将挂起的命令后台运行

```shell
suyelu@HaiZei-Tech:~$ vim helloworld.c


[1]+  Stopped                 vim helloworld.c
suyelu@HaiZei-Tech:~$ bg
[1]+ vim helloworld.c &
suyelu@HaiZei-Tech:~$
```



8. **`fg`**

   执行命令**`fg`**可以将后台执行的命令转为前台执行

9. **`jobs`**

   在Linux系统中，执行**`jobs`**命令可以查看所有在后台执行和挂起的任务以及任务编号

```shell
suyelu@HaiZei-Tech:~/code$ jobs
[1]-  Stopped                 vim a.c  (wd: ~)
[2]+  Stopped                 vim b.c  (wd: ~)
[3]   Running                 ./a.out &
```

> 尝试执行**fg**和**bg**加上任务编号，看看是什么效果





%没有输入换行符zsh输出一个%座位标记



/tmp零时文件夹



BIOS：开机检测

> 检测硬件环境
>
> Boot Loader读内核文件
>
> /sbin/init 启动进程
>
> 加载磁盘







guziqiu: x :

x代表密码占位符

### 3.管道、重定向

1. `>`

   重定向符

2. `>>`

   作用于**>**基本相同，不同的是**>>**将内容追加到文件的末尾，而**>**内容覆盖原文件

3. `<`

   与**>**刚好相反，是从文件到命令的重定向。它将文件的内容输出到命令作为输入

4. `<<` 标记文件结尾

   

```
cat >> /etc/sysconfig/network << EOF
HOSTNAME=$HOST_NAME
EOF 
```

### 4.转义符

> 在Linux中转义符**`\`**的应用十分广泛，除此之外，转义符还包括**“”**和**‘’**。

| 字符 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| ''   | 硬转义,硬引用，其内部所有的shell元字符、通配符都会被关掉。注意，硬转义中不允许出现’(单引号)。 |
| ""   | 软转义，软引用，其内部只允许出现特定的shell元字符($,\`,\\)：$用于变量值替换、`用于命令替换、\用于转义单个字符 |
| \    | 反斜杠，转义，去除其后紧跟的元字符或通配符的特殊意义。       |



下表是部分转义字符对应表：

| 转义字符 | 意义                                | ASCII码值（十进制） |
| -------- | ----------------------------------- | ------------------- |
| \a       | 响铃(BEL)                           | 007                 |
| \b       | 退格(BS) ，将当前位置移到前一列     | 008                 |
| \f       | 换页(FF)，将当前位置移到下页开头    | 012                 |
| \n       | 换行(LF) ，将当前位置移到下一行开头 | 010                 |
| \r       | 回车(CR) ，将当前位置移到本行开头   | 013                 |
| \t       | 水平制表(HT) （跳到下一个TAB位置）  | 009                 |
| \v       | 垂直制表(VT)                        | 011                 |
| \\\      | 代表一个反斜线字符''\'              | 092                 |
| \'       | 代表一个单引号（撇号）字符          | 039                 |
| \"       | 代表一个双引号字符                  | 034                 |
| \?       | 代表一个问号                        | 063                 |
| \0       | 空字符(NULL)                        | 000                 |
| \nnn     | 1到3位八进制数所代表的任意字符      | 三位八进制          |
| \xnnn    | 1到3位十六进制所代表的任意字符      | 三位十六进制        |

#### 转义符在Shell中的应用

```shell
suyelu@HaiZei-Tech:~$ echo -e "\044"
$
suyelu@HaiZei-Tech:~$ echo  "\044"
\044
suyelu@HaiZei-Tech:~$ echo  $'\044'
$
suyelu@HaiZei-Tech:~$ echo  $'\44'
$
```





## 附录1 Shell元字符

>

| 字符 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| =    | 变量名=值，为变量赋值。注意=左右紧跟变量名和值，中间不要有空格 |
| ``   | 取命令的执行结果，与下文的$有相似之处                        |
| $    | 变量值替换，$变量名替换为shell变量的值;为避免在文本连接时混淆，请使用${变量名};$0...$9 代表shell文件的参数。**$()**同``;**${}**限定变量名的范围；**$[]**整数计算； |
| >    | prog > file 将标准输出重定向到文件。                         |
| >>   | prog >> file 将标准输出追加到文件。                          |
| <    | prog < file 从文件file中获取标准输入                         |
| <<   |                                                              |
| \|   | 管道命令，例：p1 \| p2 将p1的标准输出作为p2的标准输入        |
| &    | 后台运行命令，最大好处是无需等待命令执行结束，就可以在同一命令行下继续输入命令 |
| ()   | 在子shell中执行命令,在子进程中执行                           |
| {}   | 在当前shell中执行命令，或用在变量替换的界定范围(例如上面的${变量名}用法)。 |
| []   | 字符通配，匹配括号内之一                                     |
| ;    | 命令结束符。例如p1;p2表示先执行p1,再执行p2                   |
| &&   | 前一个命令执行成功后，才继续执行下一个命令。例：p1 && p2 ;若p1执行成功后，才执行p2,反之，不执行p2; |
| \|\| | 前一个命令执行失败后，才继续执行下一个命令。例：p1 \|\| p2 ;若p1执行成功后，不执行p2,反之，才执行p2; |
| !    | 执行历史记录中的命令**!731**;匹配最近的一次命令**!echo**;取非**ls /dev/sda[!1]**;结果取反**! echo ok ;echo $?** |
| %    | **% 1**相当于**fg 1**                                        |
| ^    | 取非，和**!**雷同；**`^string1^string2^`**将上一命令的string1替换为string2 |
| ~    | home目录                                                     |
| #    | 注释                                                         |
| *    | 通配符，任意字符                                             |
| ?    | 通配符，任一字符                                             |
| .    | 当前目录；source                                             |
| -    | 减号；上次工作目录                                           |
| :    | 真值；空命令                                                 |
| \    | 转义                                                         |
| /    | 目录分割符                                                   |





## 附录2 ASCII码 对照表

| Bin(二进制) | Oct(八进制) | Dec(十进制) | Hex(十六进制) | 缩写/字符                   | 解释         |
| ----------- | ----------- | ----------- | ------------- | --------------------------- | ------------ |
| 0000 0000   | 0           | 0           | 00            | NUL(null)                   | 空字符       |
| 0000 0001   | 1           | 1           | 01            | SOH(start of headline)      | 标题开始     |
| 0000 0010   | 2           | 2           | 02            | STX (start of text)         | 正文开始     |
| 0000 0011   | 3           | 3           | 03            | ETX (end of text)           | 正文结束     |
| 0000 0100   | 4           | 4           | 04            | EOT (end of transmission)   | 传输结束     |
| 0000 0101   | 5           | 5           | 05            | ENQ (enquiry)               | 请求         |
| 0000 0110   | 6           | 6           | 06            | ACK (acknowledge)           | 收到通知     |
| 0000 0111   | 7           | 7           | 07            | BEL (bell)                  | 响铃         |
| 0000 1000   | 10          | 8           | 08            | BS (backspace)              | 退格         |
| 0000 1001   | 11          | 9           | 09            | HT (horizontal tab)         | 水平制表符   |
| 0000 1010   | 12          | 10          | 0A            | LF (NL line feed, new line) | 换行键       |
| 0000 1011   | 13          | 11          | 0B            | VT (vertical tab)           | 垂直制表符   |
| 0000 1100   | 14          | 12          | 0C            | FF (NP form feed, new page) | 换页键       |
| 0000 1101   | 15          | 13          | 0D            | CR (carriage return)        | 回车键       |
| 0000 1110   | 16          | 14          | 0E            | SO (shift out)              | 不用切换     |
| 0000 1111   | 17          | 15          | 0F            | SI (shift in)               | 启用切换     |
| 0001 0000   | 20          | 16          | 10            | DLE (data link escape)      | 数据链路转义 |
| 0001 0001   | 21          | 17          | 11            | DC1 (device control 1)      | 设备控制1    |
| 0001 0010   | 22          | 18          | 12            | DC2 (device control 2)      | 设备控制2    |
| 0001 0011   | 23          | 19          | 13            | DC3 (device control 3)      | 设备控制3    |
| 0001 0100   | 24          | 20          | 14            | DC4 (device control 4)      | 设备控制4    |
| 0001 0101   | 25          | 21          | 15            | NAK (negative acknowledge)  | 拒绝接收     |
| 0001 0110   | 26          | 22          | 16            | SYN (synchronous idle)      | 同步空闲     |
| 0001 0111   | 27          | 23          | 17            | ETB (end of trans. block)   | 结束传输块   |
| 0001 1000   | 30          | 24          | 18            | CAN (cancel)                | 取消         |
| 0001 1001   | 31          | 25          | 19            | EM (end of medium)          | 媒介结束     |
| 0001 1010   | 32          | 26          | 1A            | SUB (substitute)            | 代替         |
| 0001 1011   | 33          | 27          | 1B            | ESC (escape)                | 换码(溢出)   |
| 0001 1100   | 34          | 28          | 1C            | FS (file separator)         | 文件分隔符   |
| 0001 1101   | 35          | 29          | 1D            | GS (group separator)        | 分组符       |
| 0001 1110   | 36          | 30          | 1E            | RS (record separator)       | 记录分隔符   |
| 0001 1111   | 37          | 31          | 1F            | US (unit separator)         | 单元分隔符   |
| 0010 0000   | 40          | 32          | 20            | (space)                     | 空格         |
| 0010 0001   | 41          | 33          | 21            | !                           | 叹号         |
| 0010 0010   | 42          | 34          | 22            | "                           | 双引号       |
| 0010 0011   | 43          | 35          | 23            | #                           | 井号         |
| 0010 0100   | 44          | 36          | 24            | $                           | 美元符       |
| 0010 0101   | 45          | 37          | 25            | %                           | 百分号       |
| 0010 0110   | 46          | 38          | 26            | &                           | 和号         |
| 0010 0111   | 47          | 39          | 27            | '                           | 闭单引号     |
| 0010 1000   | 50          | 40          | 28            | (                           | 开括号       |
| 0010 1001   | 51          | 41          | 29            | )                           | 闭括号       |
| 0010 1010   | 52          | 42          | 2A            | *                           | 星号         |
| 0010 1011   | 53          | 43          | 2B            | +                           | 加号         |
| 0010 1100   | 54          | 44          | 2C            | ,                           | 逗号         |
| 0010 1101   | 55          | 45          | 2D            | -                           | 减号/破折号  |
| 0010 1110   | 56          | 46          | 2E            | .                           | 句号         |
| 00101111    | 57          | 47          | 2F            | /                           | 斜杠         |
| 00110000    | 60          | 48          | 30            | 0                           | 数字0        |
| 00110001    | 61          | 49          | 31            | 1                           | 数字1        |
| 00110010    | 62          | 50          | 32            | 2                           | 数字2        |
| 00110011    | 63          | 51          | 33            | 3                           | 数字3        |
| 00110100    | 64          | 52          | 34            | 4                           | 数字4        |
| 00110101    | 65          | 53          | 35            | 5                           | 数字5        |
| 00110110    | 66          | 54          | 36            | 6                           | 数字6        |
| 00110111    | 67          | 55          | 37            | 7                           | 数字7        |
| 00111000    | 70          | 56          | 38            | 8                           | 数字8        |
| 00111001    | 71          | 57          | 39            | 9                           | 数字9        |
| 00111010    | 72          | 58          | 3A            | :                           | 冒号         |
| 00111011    | 73          | 59          | 3B            | ;                           | 分号         |
| 00111100    | 74          | 60          | 3C            | <                           | 小于         |
| 00111101    | 75          | 61          | 3D            | =                           | 等号         |
| 00111110    | 76          | 62          | 3E            | >                           | 大于         |
| 00111111    | 77          | 63          | 3F            | ?                           | 问号         |
| 01000000    | 100         | 64          | 40            | @                           | 电子邮件符号 |
| 01000001    | 101         | 65          | 41            | A                           | 大写字母A    |
| 01000010    | 102         | 66          | 42            | B                           | 大写字母B    |
| 01000011    | 103         | 67          | 43            | C                           | 大写字母C    |
| 01000100    | 104         | 68          | 44            | D                           | 大写字母D    |
| 01000101    | 105         | 69          | 45            | E                           | 大写字母E    |
| 01000110    | 106         | 70          | 46            | F                           | 大写字母F    |
| 01000111    | 107         | 71          | 47            | G                           | 大写字母G    |
| 01001000    | 110         | 72          | 48            | H                           | 大写字母H    |
| 01001001    | 111         | 73          | 49            | I                           | 大写字母I    |
| 01001010    | 112         | 74          | 4A            | J                           | 大写字母J    |
| 01001011    | 113         | 75          | 4B            | K                           | 大写字母K    |
| 01001100    | 114         | 76          | 4C            | L                           | 大写字母L    |
| 01001101    | 115         | 77          | 4D            | M                           | 大写字母M    |
| 01001110    | 116         | 78          | 4E            | N                           | 大写字母N    |
| 01001111    | 117         | 79          | 4F            | O                           | 大写字母O    |
| 01010000    | 120         | 80          | 50            | P                           | 大写字母P    |
| 01010001    | 121         | 81          | 51            | Q                           | 大写字母Q    |
| 01010010    | 122         | 82          | 52            | R                           | 大写字母R    |
| 01010011    | 123         | 83          | 53            | S                           | 大写字母S    |
| 01010100    | 124         | 84          | 54            | T                           | 大写字母T    |
| 01010101    | 125         | 85          | 55            | U                           | 大写字母U    |
| 01010110    | 126         | 86          | 56            | V                           | 大写字母V    |
| 01010111    | 127         | 87          | 57            | W                           | 大写字母W    |
| 01011000    | 130         | 88          | 58            | X                           | 大写字母X    |
| 01011001    | 131         | 89          | 59            | Y                           | 大写字母Y    |
| 01011010    | 132         | 90          | 5A            | Z                           | 大写字母Z    |
| 01011011    | 133         | 91          | 5B            | [                           | 开方括号     |
| 01011100    | 134         | 92          | 5C            | \                           | 反斜杠       |
| 01011101    | 135         | 93          | 5D            | ]                           | 闭方括号     |
| 01011110    | 136         | 94          | 5E            | ^                           | 脱字符       |
| 01011111    | 137         | 95          | 5F            | _                           | 下划线       |
| 01100000    | 140         | 96          | 60            | `                           | 开单引号     |
| 01100001    | 141         | 97          | 61            | a                           | 小写字母a    |
| 01100010    | 142         | 98          | 62            | b                           | 小写字母b    |
| 01100011    | 143         | 99          | 63            | c                           | 小写字母c    |
| 01100100    | 144         | 100         | 64            | d                           | 小写字母d    |
| 01100101    | 145         | 101         | 65            | e                           | 小写字母e    |
| 01100110    | 146         | 102         | 66            | f                           | 小写字母f    |
| 01100111    | 147         | 103         | 67            | g                           | 小写字母g    |
| 01101000    | 150         | 104         | 68            | h                           | 小写字母h    |
| 01101001    | 151         | 105         | 69            | i                           | 小写字母i    |
| 01101010    | 152         | 106         | 6A            | j                           | 小写字母j    |
| 01101011    | 153         | 107         | 6B            | k                           | 小写字母k    |
| 01101100    | 154         | 108         | 6C            | l                           | 小写字母l    |
| 01101101    | 155         | 109         | 6D            | m                           | 小写字母m    |
| 01101110    | 156         | 110         | 6E            | n                           | 小写字母n    |
| 01101111    | 157         | 111         | 6F            | o                           | 小写字母o    |
| 01110000    | 160         | 112         | 70            | p                           | 小写字母p    |
| 01110001    | 161         | 113         | 71            | q                           | 小写字母q    |
| 01110010    | 162         | 114         | 72            | r                           | 小写字母r    |
| 01110011    | 163         | 115         | 73            | s                           | 小写字母s    |
| 01110100    | 164         | 116         | 74            | t                           | 小写字母t    |
| 01110101    | 165         | 117         | 75            | u                           | 小写字母u    |
| 01110110    | 166         | 118         | 76            | v                           | 小写字母v    |
| 01110111    | 167         | 119         | 77            | w                           | 小写字母w    |
| 01111000    | 170         | 120         | 78            | x                           | 小写字母x    |
| 01111001    | 171         | 121         | 79            | y                           | 小写字母y    |
| 01111010    | 172         | 122         | 7A            | z                           | 小写字母z    |
| 01111011    | 173         | 123         | 7B            | {                           | 开花括号     |
| 01111100    | 174         | 124         | 7C            | \|                          | 垂线         |
| 01111101    | 175         | 125         | 7D            | }                           | 闭花括号     |
| 01111110    | 176         | 126         | 7E            | ~                           | 波浪号       |
| 01111111    | 177         | 127         | 7F            | DEL (delete)                | 删除         |







# 四、linux系统信息获取





| 命令     | 功能                             |
| -------- | -------------------------------- |
| `update` | 打印系统运行时长和平均负载       |
| `who`    | 显示当前系统登录的用户信息       |
| `last`   | 显示用户最近登录信息             |
| `date`   | 显示或设置系统时间与日期         |
| `w`      | 当前登录用户列表及正在执行的任务 |
| `whoami` | 打印当前有效的用户名称           |
| `uname`  | 打印当前系统信息                 |
| `cal`    | 显示日历                         |

`uptime`系统运行时长

```shell
apricity@qiu ~ % uptime
 14:28:15 up 6 days, 22:24,  1 user,  load average: 1.88, 1.19, 1.01
```



`w`获取当前用户和正在执行的进程

```shell
apricity@qiu ~ % w                                                                                                        [127]
 14:33:51 up 6 days, 22:29,  1 user,  load average: 0.96, 0.95, 0.95
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
apricity pts/0    112.54.13.167    14:00    1.00s  3.35s  0.00s w
```



`tty`虚拟终端  `from` 从哪里登录，`loging`在什么时候登录





` last | grep  -v "wtmp begins" | grep -v "^$" | grep -v "reboot" |ƒ |sort | uniq -c | sort -n -r  | head -n 2`



```shell
#上一次登录停留了多长时间
```







`uname`

```shell
apricity@qiu linux基础 % uname -a
Linux qiu 4.15.0-117-generic #118-Ubuntu SMP Fri Sep 4 20:02:41 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux


apricity@qiu linux % date +"%Y-%m-%d %H:%M:%S"                                                                        [0]
2020-11-29 15:40:28
```





cal日历







# 五、shell编程



```shell
#!/bin/bash
#这是注释
#  ！不是注释，指定解释器,固定格式
echo 'hello'


:<<EOF
注释的代码...
EOF
```





## 1.变量与局部变量

```shell
#变量
apricity@qiu 1.shell % a=123                                                                                          [0]
apricity@qiu 1.shell % echo $a                                                                                        [0]
123

apricity@qiu 1.shell % a = 123
zsh: command not found: a

```

> 变量的定义
>
> ​	a=12
>
> 局部变量
>
> ​	local a=12
>
> 特殊变量
>
> - 位置变量
>
>   $0:获取当前执行shell脚本文件名，包括路径
>
>   $*:获取当前shell的所有参数
>
>   $#：得到当前脚本的参数个数
>
>   $@：获取这个程序所有的参数



状态变量

​		$?：判断上一个指令是否执行成功，0为成功，非零不成功

​		$$:获取当前进程的PID

​		$!：上一个指令的PID







## 2.输入输出

`echo`



`echo -e "hello\n"#开启转义`

`printf`



```shell
#软转义
apricity@qiu 1.shell % a="first.sh:${a}"                                                                                    [0]
apricity@qiu 1.shell % echo $a                                                                                              [0]
first.sh:first.sh
#硬转义
apricity@qiu 1.shell % a='first.sh:${a}'                                                                                    [0]
apricity@qiu 1.shell % echo $a                                                                                              [0]
first.sh:${a}
```



```shell
echo -e “\033[32m 绿色字 \033[0m” 
```

```shell

#命令替换符``，替换命令
apricity@qiu 1.shell % a=`pwd`                                                                                              [0]
apricity@qiu 1.shell % pwd                                                                                                  [0]
/home/apricity/linux/1.shell
apricity@qiu 1.shell % echo $a                                                                                              [0]
/home/apricity/linux/1.shell


```





```shell

apricity@qiu 1.shell % PATH=${PATH}:first.sh                                                                                [0]
apricity@qiu 1.shell % echo $PATH                                                                                           [0]
/home/apricity/.autojump/bin:/home/apricity/.autojump/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:first.sh


```





特殊变量



`echo $?`上一条命令的执行结果

read 

​	-s静默模式输入密码

​	

## 3.函数

```bash
#!/bin/bash
function __printf__() {
	echo "$1"
	return
}


__printf__ "hello guziqiu"
```





## 4.流程控制语句

### 1.`if`

```bash
#!/bin/bash
read a
if [[ $a -gt 10 ]];then
	echo "$a > 10"
else
	echo "$a <= 10"
fi



#!/bin/bash
read a
if [[ ${a} -gt 10 ]];then
	echo "$a > 10"
elif [[ ${a} -eq 10 ]];then
	echo "$a = 10"
else
	echo "$a < 10"
fi
```



`test`表达式



### 2.`while`

```shell
while [[ condition ]]; do
done
```





```bash
#!/bin/bash


num=0
while [[ $num -lt 100 ]];do
	echo ${num}
	num=$[ ${num} + 1 ]
done
```



### 3.case



```shell
#!/bin/bash
case words in
		pattern)
					;;
esac
```



```bash
#!/bin/bash
read a
case $a in
	1)
		echo 1
		;;
	2)
		echo 2
		;;
esac



read a
case $a in
	1)
		echo 1
		;;
	2)
		echo 2
		;;
	default)
		echo "not found"
		;;
esac
```





遍历当前目录所有文件

```bash
for i in `ls *.sh`;do                                                                                [0]
echo $i
done
1.first.sh
2.func.sh
3.if.sh
4.case.sh
```







### 4.for

```shell
for in in words; do
done
for (( i=0; i<10; i++ )); do
done
```



```bash
#!/bin/bash
for i in $@;do
	echo $i
done


for ((i=1; i <= 100; i++));do
	echo $i
done
```







### 5.until

```shell
#!/bin/bash
until [[ condition ]];do
done
```



```bash
#!/bin/bash
num=0
until [[ $num -eq 100 ]];do
	echo $num
	num=$[ ${num} + 1 ]
done
```







100以内偶数求和

```bash
#!/bin/bash
sum=0
for (( i=1; i<=100; i++ ));do
	if [[ $[ ${i} % 2 ]  -eq 0 ]];then
		sum=$[ ${sum} + ${i} ]
	fi
done
echo ${sum}
```



空格敏感，

=号左右不能加空格





$a变量名

$[ 整数计算 ]

[[ test表达式 ]]



## 5.数组

`declare -a a`

>输出数组内容
>
>`${array[*]}`
>
>`${array[@]}`



> 确定数组元素个数
>
> `${#array[@]}`



> 找到数组的下标
>
> `${!array[@]}`



> 追加数组
>
> `array+=(a,b,c);`

> 数组排序
>
> `sort`

> 删除数组元素
>
> `unset`









```bash
apricity@qiu:~/linux/1.shell$ read -a a
1 2 3 4 5 6 7


apricity@qiu:~/linux/1.shell$ echo ${a}
1
apricity@qiu:~/linux/1.shell$ echo ${a[1]}
2


apricity@qiu:~/linux/1.shell$ echo ${a[@]}
1 2 3 4 5 6 7

apricity@qiu:~/linux/1.shell$ echo ${a[*]}
1 2 3 4 5 6 7

```





```shell

#查看数组下标
apricity@qiu:~/linux/1.shell$ echo ${!c[*]}
0 1 2
apricity@qiu:~/linux/1.shell$ echo ${!c[@]}
0 1 2

apricity@qiu:~/linux/1.shell$ c+=(4 5 6)
apricity@qiu:~/linux/1.shell$ echo ${c[@]}
0 1 3 4 5 6
apricity@qiu:~/linux/1.shell$ echo ${c[@]} | sort
0 1 3 4 5 6


apricity@qiu:~/linux/1.shell$ unset c
apricity@qiu:~/linux/1.shell$ echo ${c[@]}

```





```shell
apricity@qiu:~/linux/1.shell$ d=(1 2  3  4 5  6 7 8)
apricity@qiu:~/linux/1.shell$ echo ${d[*]}
1 2 3 4 5 6 7 8

```



```shell
apricity@qiu:~/linux/1.shell$ echo ${a[*]}
1 2 3 4 5 6 7
apricity@qiu:~/linux/1.shell$ echo ${a[1]}
2
apricity@qiu:~/linux/1.shell$ unset a[1]
apricity@qiu:~/linux/1.shell$ echo ${a[1]}

apricity@qiu:~/linux/1.shell$ echo ${a[*]}
1 3 4 5 6 7

apricity@qiu:~/linux/1.shell$ echo ${!a[*]}
0 2 3 4 5 6
```







素数筛



```shell

#!/bin/bash
if [[ $# -ne 2 ]];then
	echo "error"
	exit
fi

start=$1
end=$2

declare -a prime

function init_prime() {
	local end=$1
	local i
	prime[1]=1
	for (( i=2; i <= ${end}; i++ ));do
		for (( j=$[ 2 * ${i} ]; j <= ${end}; j+=i ));do
			prime[${j}]=1
		done
	done
}

init_prime ${end}


for (( i=${start}; i<=${end}; i++ ));do
	if [[ ${prime[$i]}x == x ]];then
		sum=$[ ${sum} + ${i} ]
	fi
done

echo ${sum}
```







# 六、文件及目录



### 1.目录

`cd`切换到当前目录

`cd ..`切换到上层目录

`cd.`  切换到当前目录

`cd~/cd` 回到自己家目录

`cd -`回到 上次工作目录

`cd ~guziqiu/`切换到guziqiu的目录





`pwd` 打印当前工作目录



```shell
ls -ald run/                                                                                             [0]
drwxr-xr-x 21 root root 660 Dec  2 18:14 run/
```





`pwd -L`显示逻辑工作目录

`pwd -P`显示物理工作目录

（链接文件）

```shell
apricity@qiu run % pwd                                                                                                       [0]
/var/run
apricity@qiu run % pwd -L                                                                                                    [0]
/var/run
apricity@qiu run % pwd -P                                                                                                    [0]
/run
```





```shell
ln ./1.shell/test/ .                                                                                    [0]
ln: ./1.shell/test/: hard link not allowed for directory
#hard link硬链接
```



`mkdir -p`自动创建父目录





!加一个命令匹配命令或者history里面的行数会输出显示该命令



`./a.out`

`./`是当前目录的意思





### 2.文件及目录管理



`cp [irapdslu]`

> ➢选项
> ➢`-i`: 若文件存在，询问用户
> ➢`-r`:递归复制
> `-a`:pdr的集合
> ➢`-p`:连同文件属性一起拷贝
> ➢`-d`: 若源文件为连接文件的属性，则复制连接文件的属性
> ➢`-s`:拷贝为软连接
> ➢`-1`:拷贝为硬连接
> ➢`-u`:源文件比目的文件新才拷贝
> ➢尝试: `cp filel file2 . dir`



`rm`

> `rm [irf]``
>
> ``-i`:互动模式
>
> `-r`:递归删除
>
> `-f`:force
>
> 



`mv`

> `mv [ifu]`
>
> `-i`:互动模式
>
> `-u`: 源文件更新才会移动
>
> `-f`:force



### 3.文件内容查阅

`cat`正向连续读

> ➢`cat [-AbEnTv] <file>`
> ➢选项:
> ➢`-A`:相当于-vET
> ➢-`V`:列出看不出的字符
> `-E`:显示断行符为`$`
> ➢`-T`:显示TAB为`^I`
> ➢`-b`:列出行号
> ➢`-n`:列出行号，连同空行也编号







`tac`反向连续读

`nl`输出行号显示文件

>➢`nl [-bnw] <file>`
>➢选项
>➢`-b`:行号指定的方式
>		`-b a`:相当于cat -n
>		`-b t`:相当于cat -b
>➢`-n`:列出行号的表示方法
>		`-n ln`:行号在屏幕最左边显示
>		`-n rn`:行号在自己字段的最右边显示
>		`-n rz`:行号在自己字段的最右边显示，前面自动补全0
>➢`-w <num>`:行号所占位数







`more`一页一页的显示内容



>MORE按页查看
>`more file`
>➢`/string`向下查找string关键字
>➢`:f`显示文件名称和当前显示的行数
>➢`q`离开







`less`与相似但是可以上下翻看

>LESS按页查看
>
>➢`less file`
>➢`/string`向下查找  `n`:继续向下查找
>➢`/?string`反向查找`N`:继续反向查询







`head`只看头几行

> HEAD查看头几行
> ➢`head [-n num] <file>`
> ➢`-nnum`:显示前num行
> ➢`-n -num`:除了后num行外，其他的都显示





`tail`只看尾几行

>TAIL查看末尾几行
>➢`tail [-n num] <file>`
>➢`-n num`:显示文件后num行
>➢`-n +num`:除了前num行，其他的都显示





`od`以二进制形式查看文件内容

>OD二_进制文件查看
>➢`od [-t TYPE] <file>`
>➢`-t` :
>	➢`a`:默认字符输出
>	➢`c`:ASCII字符输出
>	➢`d[size]`:十进制输出，每个数占用size bytes
>	➢`f[size]`:浮点数输出...
>	➢`o[size]`:八进制输出....
>	➢`x[size]:`十六进制输出...



more和all





### 4.修改文件时间与新建文件

> ➢文件的三个时间
> 	➢`mtime`:内容数据改动时才更新这个时间;
> 	➢`ctime`:文件的权限，属性改动时更新这个时间
> 	➢`atime`:文件的内容被取用access时，更新这个时间
> ➢`ls -1 --time=ctime /etc/hostname`







> ➢`touch [ - -acdmt] <file>`
> ➢`-a`:仅修改访问时间
> ➢`-c`:仅修改文件的时间，若文件不存在，不新建
> ➢`-d`:修改文件日期
> `-m`:仅修改mtime
> ➢`-t`:修改文件时间[ yymmddhhmm]

### 5.文件隐藏属性

> ➢`chattr [+-=][ASacdistu] <file_ or_ dir>`
> ➢`A`:不修改atime
> ➢`S`:同步写入
> ➢`a`:只能增加数据
> ➢`c`:自动压缩，解压
> ➢`d`:不会被dump程序备份
> ➢`i`:不能删除，修改，建立连接
> ➢`s`:文件删除时，直接从磁盘删除
> ➢`u`:文件删除时，数据内容存在磁盘中





> ➢`lsattr [-adR] <file_ or_ dir>`
> ➢`-a`:打印隐藏文件的隐藏属性
> ➢`-d`:如果是目录，仅打印目录的信息
> ➢`-R`:递归





### 6.文件的特殊权限



`set_iuid`




| 权限         |      | 作用对象               | 效果                                   |
| ------------ | ---- | ---------------------- | -------------------------------------- |
| `set_uid`    | S    | 二进制程序文件，非脚本 | 用户在执行改程序时获得程序所有者权限   |
| `set_gid`    | s    | 目录和二进制文件       | 用户在该目录里，有效组变为目录所属组， |
| `sticky bit` | t    | 目录                   | 在该目录下，用户只能删除自己创建的内容 |

`chmod +t file`



### 7.命令与文件的查询



`whereis`寻找特定文件

>➢`whereis [ - .bmsu] <file_or_dir>`
>➢`-b`:只查找二进制文件
>➢`-m`: 只查找manual路径下的文件
>➢`-s`:只查找source源文件
>`-u`:查找其他文件

`which`寻找执行文件，查找path路径下所有可执行文件



`locate` 搜索文件（可部分查找）

>`LOCATE`模糊定位
>➢`locate [-ir] keyword`
>➢`-i`:忽略大小写
>➢`-r`:后面可接正则表达式
>➢相关文件: `/ect/updatedb . conf`
>➢`/var/lib/mlocate`



`find`多样化高级查找

>`FIND`高级査找
>
>find 目录 -name 目录名
>
>➢`find [PATH] [ option] [action ]`
>➢与用户或用户组相关的参数:
>➢`-uid n`:用户UID为n
>➢`-gid n`:群组Gid为n
>➢`-user name`: 用户名为name
>➢`-group name`:群组名为name
>➢`-nouser`:文件所有者不存在
>➢`nogroup`:文件所在组不存在
>
>
>
>➢与文件权限及名称有关的参数:
>➢`-name filename`: 文件名为filename
>➢`-size [+-] SIZE`:查找比SIZE大或小的
>➢`-type TYPE`: `f b c d l s p` 
>➢`-perm mode`: mode刚好等于的文件
>➢-`perm -mode`:全部包含mode的文件
>➢`find -exec ls -l {} \;`
>
>-exec 命令的开始
>
>\命令结尾
>
>
>
>〉`find [PATH] [option] [ action]`
>与时间相关的参数: -`atime, -ctime, -mtime`
>`-mtime n`: n天前的“一天之内’修改的文件amin
>〉`-mtime +n`: n天之前，不包含n，修改过的文件
>〉`-mtime - -n`: n天之内，包含n,修改过的文件
>》`-newer file`: 比file还要新的文件





```shell
 ls -al `which passwd`                                                                                                     [10]
-rwsr-xr-x 1 root root 59640 Mar 23  2019 /usr/bin/passwd
```







## linux三剑客awk

awk文本数据处理

`awk [-Ffv] 'BEGIN{ commands} pattern { commands} END { commands}' file`

```shell
last | grep -v "^$" | grep -v "wtmp" | grep -v "still"| head -5 | awk 'BEGIN {print "start\n"} {if ($1 == "apricity") {print $10}} END {printf("%s\n","Bye")}'| grep -v "^$" |cut -c 2-6 |awk -F: -v hour=0 -v min=0 '{hour+=$1;min+=$2} END {if (min>=60) {hour+=min/60;min=min%60} printf("%d hours, %d min",hour,min)}'
3 hours, 2 min%
```











# 七、数据提取操作







| 命令    | 说明             | 命令    | 说明                 |
| ------- | ---------------- | ------- | -------------------- |
| `cut`   | 切分             | `grep`  | 检索                 |
| `sort`  | 排序             | `wc`    | 统计字符、字数、行数 |
| `uniq`  | 去重             | `tee`   | 双向重导项           |
| `split` | 文件切分         | `xargs` | `参数代换`           |
| `tr`    | 替换、压缩和删除 |         |                      |



## 1.cut 切分

>`➢cut [-dfc] <file>`
>
>​	`-d c`:以c字符分割(c在字符中)
>
>​	`-f num`: 显示num字段的内容`[n- ; n-m;-m]`
>​    `-b num`: 字节
>​	`-c num`: 字符

`cut -d : -f 1`

## 2.grep检索

>`grep [-acinv] <string> <fi1e>`
>	`-a`:将二进制文件以普通文件的形式搜寻数据
>	`-c`:统计搜寻到的次数
>
>​	`-C`:统计
>
>​	`-i`:忽略大小写
>​	`-n`:顺序输出行号
>​	`-v`:反向输出(输出没找到的)

`grep -v "^$"` 过滤空白符

​	



`ps -ef`   linux下任务管理器





 



## 3.sort排序



>➢`sort [ - fbMnrtuk] <file_ or_ stdio>`
>➢`-f`:忽略大小写
>➢`-b`:忽略最前面的空格符
>➢`-M`:以月份名称排序
>➢`-n`:以纯数字方式排序
>   `  -r`:反向排序
>➢`-u`:uniq
>➢`-t`:分割符，默认[TAB ]
>➢`-k`:以那个区间排序



## 4.WC统计字符,字数,行数

>`wc [ - lwm] <file_or_stdin>`
>➢`-1`:仅列出行号
>➢`-w`:仅列出多少字
>➢`-m`:仅列出多少字符



## 5.UNIQ去重

> ➢`uniq [-ic]`
> ➢`-i`:忽略大小写字符的不同
> ➢`-c`:进行计数





## 6.TEE 双向重导项

> `tee [-a] file`
> `-a`:append

 

## 7.SPLIT文件切分

> ➢`split [-bl] <file> PREFIX` 
> ➢`-b SIZE`: 切分为SIZE大小的文件
> ➢`-l num`: 以num行为大小切分

```shell
ls /etc/ | split -l 10
  ls                                                                     [0]
xaa  xab  xac  xad  xae  xaf  xag  xah  xai  xaj  xak  xal  xam  xan  xao  xap  xaq  xar  xas
```



## 8.xargs参数代换

> ➢`xargs [ -0pne] <command>`
> ➢`-0`:将特殊字符还原为普通字符
> ➢`-eEOF`: 当xargs读到EOF时停止
> ➢`-p`:执行指令前询问
> ➢`-n num`: 每次执行command时需要的参数个数

```zsh
echo "/etc/" | xargs ls


echo " . /bin /etc" | xargs -e"/bin" ls                                [0]
xaa  xab  xac  xad  xae  xaf  xag  xah	xai  xaj  xak  xal  xam  xan  xao  xap	xaq  xar  xas


cat /etc/passwd | cut -d : -f 1  |xargs -p -n 1 id

```





## 9.tr 对标准输入的字符替换,压缩,删除

> ➢`tr [cdst] <第一字符集> <第二字符集>`
> ➢`c` 用字符集二取代所有不属于第一字符集的字符
> ➢`d`删除所有属于第一字符集的字符
> ➢`s`将连续重复的字符以单独一个字符表示
> ➢`t`先删除第一字符集较第二字符集多出的字符

` man ls | tr -sc "a-zA-Z" " "`

`man ls | tr -sc "a-zA-Z" "\n" | sort | uniq -c | sort -nr | head -9`



## 10.数据提取练习



> 1.tr命令对文件的重命名，内容的替换操作



> #“1 2 3 4 5 6 7 9 a v 你好 . /8”
> #求以上字符串中所有数字之和

`echo "1 2 3 4 5 6 7 9 a v 你好 . /8" | tr -c "1-9" "\n" | grep -v "^$" | awk '{sum+=$1} END {print sum}'`
`45`

> #echo “ABCefg” >> test.log
>
> #请将该文件中所有大写字母转换为小写


 `echo  ABCefg | tr 'A-Z' 'a-z'`



> 2.找到`PATH`变量中的最后一个路径。



`echo ${PATH} | tr ":" "\n" | tail -1`



> 3.使用`last`命令,输出所有的关机信息。



`ast | grep "reboot"`



> 4.将`/etc/passwd`中的内容按照用户名排序。

`cat /etc/passwd | sort -t : -k 1`



> 5.将`/etc/passwd`中的内容按`uid`排序。

`cat /etc/passwd | sort -t : -k 3`



> 6.在云主机上查找系统登录用户的总人次。

`last | grep -v "^$" | grep -v "wtmp" | grep -v "reboot"  | wc -l`



> 7.将云主机中登录的所有用户名，按照次数排序，并输出次数。

`last | grep -v "^$" | grep -v "wtmp" | grep -v "reboot"  | cut -d " " -f 1 | sort | uniq  -c`
    105 apricity
     10 guziqiu
      9 root
      3 test

> 8.将本地的`/etc`目录下的文件及目录，每十条保存到一个文件中。

`ls /etc/ | split -l 10`

> 9.将`/etc/passwd`中存放的第10到20个用户，输出`uid`，`gid`和`groups`。

`cat /etc/passwd| head -n 20 | tail -n 10 | cut -d : -f 1 | xargs -n 1 id`

> 10.将按照用户名查看`/etc/passwd`中的用户，读到`'sync'`用户结束。

​		`cat /etc/passwd | cut -d : -f 1 | xargs -e"sync"`



> 11.词频统计

```bash
使用下面这个命令生成一个文本文件。
cat >> a.txt << xxx
nihao hello hello 你好 
nihao
hello 

ls

cd
world
pwd
xxx
```

统计a.txt中各词的词频，并按照从大到小的顺序输出。

`cat a.txt | tr -s " " "\n" | sort | uniq -c | sort -n -r | awk '{print $2, $1}'`

`cat a.txt | tr  " " "\n" | grep -v "^$" | sort | uniq -c | sort -r`









# 八、软/硬链接



ext4文件系统将系统划分为inode、block、spuerblock（）

## 1.block

>文件是存储在硬盘上的，硬盘的最小存储单位叫做扇区`sector`，每个扇区存储`512字节`。操作系统读取硬盘的时候，不会一个个扇区地读取，这样效率太低，而是一次性连续读取多个扇区，即一次性读取一个块`block`。这种由多个扇区组成的块，是文件存取的最小单位。块的大小，最常见的是`4KB`，即连续八个`sector`组成一个`block`。



## 2.inode文件结点

> 文件数据存储在块中，那么还必须找到一个地方存储文件的元信息，比如文件的创建者、文件的创建日期、文件的大小等等。这种存储文件元信息的区域就叫做`inode`，中文译名为`索引节点`，也叫`i节点`。因此，一个文件必须占用一个`inode`，但至少占用一个`block`。

- 元信息 → inode
- 数据 → block

------



>`inode`包含很多的文件元信息，但不包含文件名，例如：字节数、属主`UserID`、属组`GroupID`、读写执行权限、时间戳等。
>
>而文件名存放在目录当中，但`Linux`系统内部不使用文件名，而是使用`inode号码`识别文件。对于系统来说文件名只是`inode号码`便于识别的别称。





## 3.硬链接

> 通过文件系统的`inode`链接来产生的新的文件名，而不是产生新的文件，称为硬链接。
>
> 一般情况下，每个`inode`号码对应一个文件名，但是`Linux`允许多个文件名指向同一个`inode`号码。意味着可以使用不同的文件名访问相同的内容。



`ln 源文件 目标`



> 运行该命令以后，源文件与目标文件的`inode`号码相同，都指向同一个`inode`。`inode`信息中的链接数这时就会增加`1`。

> 当一个文件拥有多个硬链接时，对文件内容修改，会影响到所有文件名；但是删除一个文件名，不影响另一个文件名的访问。删除一个文件名，只会使得`inode`中的链接数减`1`。



> 需要注意的是不能对目录做硬链接。
>
> 通过`mkdir`命令创建一个新目录，其硬链接数应该有`2`个，因为常见的目录本身为`1`个硬链接，而目录下面的隐藏目录`.（点号）`是该目录的又一个硬链接，也算是`1`个连接数。
>
> 直观理解是，如果允许硬链接指向目录，假设目录.../d1/...与.../d2/...互为硬链接，那么在d1下必然包含目录项“..”，试问这个“..”应该指向d1还是d2?





## 4.软连接

类似于Windows的快捷方式功能的文件，可以快速连接到目标文件或目录，称为软链接。

`ln -s 源文件或目录 目标文件或目录`

>软链接就是再创建一个独立的文件，而这个文件会让数据的读取指向它连接的那个文件的文件名。
>
>例如，文件`A`和文件`B`的`inode`号码虽然不一样，但是文件`A`的内容是文件`B`的路径。读取文件`A`时，系统会自动将访问者导向文件`B`。这时，文件`A`就称为文件`B`的软链接`soft link`或者符号链接`symbolic link`。



>这意味着，文件`A`依赖于文件`B`而存在，如果删除了文件`B`，打开文件`A`就会报错。
>
>这是软链接与硬链接最大的不同：
>
>文件`A`指向文件`B`的文件名，而不是文件`B`的`inode`号码，
>
>文件`B`的`inode`链接数不会因此发生变化。







# 九、shell实现线性筛



```shell
#!/bin/bash


if [[ $# -ne 2 ]];then
	echo "Usage: $0 start end"
	exit
fi

start=$1
end=$2

declare -a prime
sum=0
for (( i=2; i<=${end}; i++ ));do
	if [[ ${prime[$i]}x == x ]];then
		prime[0]=$[ ${prime[0]} + 1 ]
		prime[${prime[0]}]=${i}
	fi
	for (( j=1; j<=${prime[0]}; j++ ));do
		if [[ $[ $i * ${prime[$j]} ] -gt ${end} ]];then
			break;
		fi

	done
done
for (( i=1; i<=${prime[0]}; i++ ));do
	sum=$[ ${sum} + ${prime[$i]} ]
done
echo $sum
```







# 十、seq









1.替换文件每行中第一个出现的正则表达式，并打印结果:
`sed 's/{{regex}}/{{replace}}/' {{filename}}`

2.***Replace all occurrences of an extended regular expression in a file, and print the result:
`sed -r 's/{{regex}}/{{replace}}/g' {{filename}}`

`/g`全局替换

```zsh
at a.log | sed 's/abc/123/'                  
123123  abc
frrrrrrtyd
axcvrewgfdddddds
 
123

 cat a.log | sed -r 's/abc/123/g'                                         
123123  123
frrrrrrtyd
axcvrewgfdddddds
 
123
```

 

3.Replace all occurrences of a string in a file, overwriting the file (i.e. in-place):
`sed -i 's/{{find}}/{{replace}}/g' {{filename}}`



4.- Replace only on lines matching the line pattern:
   `sed '/{{line_pattern}}/s/{{find}}/{{replace}}/' {{filename}}`

```shell
sed  '/1/s/abc/123/' a.log                                                                          
123123  abc
frrrrrrtyd
axcvrewgfdddddds



abc

cat a.log                                                                                         
abc123  abc
frrrrrrtyd
axcvrewgfdddddds



abc
```



替换常用



5. ***Delete lines matching the line pattern:
   `sed '/{{line_pattern}}/d' {{filename}}`



```shell
#删除5-7行
apricity@Apricity test % cat a.log | sed "5,7d"                         
abc123  abc
frrrrrrtyd
axcvrewgfdddddds

abc


apricity@Apricity test % cat a.log                                       
abc123  abc
frrrrrrtyd
axcvrewgfdddddds

#script
echo "abc"
#END
abc

#只删一行
apricity@Apricity test % cat a.log | sed "/script/d"                                                                          [0]
abc123  abc
frrrrrrtyd
axcvrewgfdddddds

echo "abc"
#END
abc
```



6.***Replace separator / by any other character not used in the find or replace patterns, e.g., #: 

`sed 's#{{find}}#{{replace}}#' {{filename}}`

可以用`#.,`代替`/`

7.Print the first 11 lines of a file:
`sed 11q {{filename}}`







![截屏2020-12-08 上午11.53.06](https://guziqiu-pictures.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2020-12-08%20%E4%B8%8A%E5%8D%8811.53.06.png)

将123全部替换为abc

8.将行首替换为`$`

```shell
sed 's/^/\$/g' a.log                                                       
$abc123  abc
$frrrrrrtyd
$axcvrewgfdddddds
$
$#script
$echo "abc"
$#END
$abc
```





9.找到//里面的内容并且删除直到行尾

```shell
 cat a.log | sed '/script/,$d'                                           
abc123  abc
frrrrrrtyd
axcvrewgfdddddds

```









# 总结：

## 1.vim

快速跳转：

> 行首					0
>
> 行尾					$
>
> 文件开始      gg
>
> 文件末尾		GG
>
> 任意行				:12,12G



复制

> 拷贝         yy
>
> 剪切			dd
>
> 多行操作   3yy/dd





删除

> x  删除
>
> 2dd
>
> d2G         删除两行
>
>  

vimtuter帮助手册







linux

> linux历史     
>
> 
>
> linux本质：linux内核操作系统，其他功能是各开发商开发
>
> 
>
> unix：云计算后开始减少









## 2.shell

zsh

> zsh相关文件
>
> > zshenv：一般放环境变量
> >
> > zprofile：用于用户login时读入（执行）的配置
> >
> > zshrc：用户开启交互是命令行时读入的配置
>
> 
>
> 环境变量概念:
>
> 环境变量是在操作系统中一个具有特定名字的对象，它包含了一个或者多个应用程序所将使用到的信息。
>
> 执行命令的本质：从文件系统调用执行文件，返回结果



![截屏2020-12-15 上午11.47.50](https://guziqiu-pictures.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2020-12-15%20%E4%B8%8A%E5%8D%8811.47.50.png)





僵尸进程，父亲生了孩子，孩子没有被回收



man手册

> man  
>
> tldr
>
> man -k
>
> 检索   前后移动
>
> Baidu
>
> 查找命令
>
> tab          自动补全命令
>
> man -k
>
> - man -k：根据关键字搜索联机帮助，是一种模糊搜索。例如要查找"passwd"相关的信息，使用man -k passwd会找到很多和passwd相关的帮助页。
> - man -f：关键字精确搜索，与-k不同，它只搜索与关键字完全匹配的帮助页





 



## 3.linux具体使用

文件及目录

远程拷贝ssh  、sshfs、scp

sshfs:远程挂载



文件查阅  [查阅](#3.文件内容查阅)

> `cat`
>
> `head`
>
> - -n<行数> 显示的行数。
>
> `tail`
>
> - -n<行数> 显示文件的尾部 n 行内容
>
> `tail -f`
>
> - -f 循环读取
>
> - ```
>   tail -f notes.log
>   ```
>
>   此命令显示 notes.log 文件的最后 10 行。当将某些行添加至 notes.log 文件时，tail 命令会继续显示这些行。 显示一直继续，直到您按下（Ctrl-C）组合键停止显示。
>
> `more` 
>
> `less`可回看、检索信息高亮显示



移动和复制

> `cp`
>
> `mv`
>
> `ln`硬链接，软链接
>
> `rm`





文件类型及权限  

> 七种：
>
> 普通文件
>
> 目录
>
> 字符
>
> 块
>
> 管道
>
> 链接
>
> socket



权限 `rwx`   

>目录`x`可以`cd`进去
>
>用户分组 `ugo`
>
>命令
>
>`chmod、chgrp、chown、usermod`
>
>特殊权限：
>
>`set uid`
>
>只能改自己的权限
>
>`set gid`		用户临时进入目录时，创建一个文件时，该用户会临时变成目录所属组
>
>`sed uid`		当用户执行文件时，用户临时拥有此文件，如密码文件
>
>`sbit`黏着位		目录下的文件只能被所属者删掉
>
>隐藏属性  











4.文件时间

> `atime`		访问时间，跟新过于频繁也不好，耗时
>
> `ctime`		修改时间
>
> `mtime`		修正时间   ls默认
>
> `touch`       创建文件，修改时间





文件定位：

> 特殊文件：
>
> `which`
>
> `whereis`
>
> 普通文件
>
> `locate`  	db updatedb(基于数据库)
>
> `find`





数据处理[数据提取操作](#七、数据提取操作)

> cut		
>
> tr
>
> sort
>
> uniq
>
> grep
>
> awk
>
> sed







重定向

> \>
>
> />>
>
> <
>
> <<
>
> /\`a\`



读入数据:read

```shell
vim 1.sh
read a
read b
echo$[ $a + $b ]

vim 1.in
2
3

bash 1.sh < 1.in
5
```



```shell
vim 2.sh
str=''
read str
echo ${str}
vim 2.in
guziqiu is 18years old.

bash 2.sh < 2.in
```







进程管理

> `fg`
>
> `bg`
>
> `jobs`





定时任务

> crontab -e



系统信息获取

> `unname`
>
> `top`
>
> `free`
>
> `dstat`
>
> `htop`
>
> `nmon`
>
> `uptime`









## 4.shell编程





变量

> 命令替换符
>
> 特殊变量
>
> `$0￥`
>
> `$#`
>
> `$?`
>
> `$@`
>
> `$*`



=两边没有空格



输入输出

> read 
>
> echo 
>
> printf 



分支

> test表达式 
>
> ​		man test
>
> 整数判断：整数计算
>
> 字符串 	==

 



> if [[  ]]

> case



循环 for 

> ```shell
> for i in `seq 1 100`
> ```
>
> `for (( i =1;  i<= 100;i++ ))`(推荐)
>
> `while`
>
> `until`
>
> 



函数

数组

> 数组初始化
>
> unset
>
> 遍历









![1](https://guziqiu-pictures.oss-cn-hangzhou.aliyuncs.com/img/1.png)





























































